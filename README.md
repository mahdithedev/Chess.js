I need to warn you that the code is ugly. The better decision would have been to use a library like chess.js. I may write a chess library soon ...
